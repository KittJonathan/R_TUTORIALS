---
title: "Pingouins de l'archipel Palmer"
format: html
editor: visual
execute: 
  echo: false
  message: false
  warning: false
toc: true
toc-title: Table des matières
language: 
  section-title-references: Bibliographie
bibliography: references.bib
---

```{r}
library(tidyverse)
library(palmerpenguins)
library(gt)
```

```{r}
my_cols = c("Adelie" = "darkorange",
            "Chinstrap" = "purple",
            "Gentoo" = "cyan4")
```

[![](https://allisonhorst.github.io/palmerpenguins/reference/figures/lter_penguins.png){fig-align="center" width="75%"}](https://allisonhorst.github.io/palmerpenguins/reference/figures/lter_penguins.png)

## Données

Le jeu de données **`penguins`** est issu du package [{palmerpenguins}](https://allisonhorst.github.io/palmerpenguins/) [@gorman2014].

Ce jeu de données contient :

-   **`r nrow(penguins)` observations**

-   **`r ncol(penguins)` variables**

```{r}
penguins |> 
  head(5) |> 
  gt()
```

## Analyse

### Nombre d'individus

La @tbl-count représente le nombre d'individus par espèce et par île.

```{r}
#| label: tbl-count
#| tbl-cap: Nombre d'individus par espèce et par île
table(penguins$species, penguins$island)
```

::: {.callout-tip appearance="simple"}
Seule l'espèce *Adelie* est présente sur les trois îles.
:::

### Rapport entre l'aile et le bec

La @fig-flipper-vs-bill représente la relation entre la longueur de l'aile et la longueur du bec.

```{r}
#| label: fig-flipper-vs-bill
#| fig-cap: Rapport entre la longueur de l'aile et la longueur du bec
penguins |> 
  ggplot(aes(x = flipper_length_mm,
             y = bill_length_mm,
             color = species)) +
  geom_point() +
  scale_color_manual(values = my_cols) +
  labs(x = "Longueur de l'aile (mm)",
       y = "Longueur du bec (mm)",
       color = "Espèce") +
  theme_bw()
```

::: {.callout-tip appearance="simple"}
Les individus de l'espèce *Gentoo* ont dans l'ensemble des ailes plus longues. Les individus des espèces *Adelie* et *Chinstrap* ont globalement des ailes de longueur similaire, mais les individus de l'espèce *Chinstrap* ont des becs plus longs.
:::

### Rapport entre la longueur et la hauteur du bec

La @fig-bill-length-vs-depth représente la relation entre la longueur et la hauteur du bec.

```{r}
#| label: fig-bill-length-vs-depth
#| fig-cap: Rapport entre la longueur et la hauteur du bec
penguins |> 
  ggplot(aes(x = bill_length_mm,
             y = bill_depth_mm,
             color = species)) +
  geom_point() +
  scale_color_manual(values = my_cols) +
  labs(x = "Longueur du bec (mm)",
       y = "Hauteur du bec (mm)",
       color = "Espèce") +
  theme_bw()
```

::: {.callout-tip appearance="simple"}
Les individus de l'espèce *Adelie* ont dans l'ensemble des becs plus courts. Les individus des espèces *Chinstrap* et *Gentoo* ont globalement des becs de longueur similaire, mais les individus de l'espèce *Chinstrap* ont des becs plus hauts.
:::

Nous calculons le ratio entre ces deux mesures à l'aide de la formule suivante :

$$
bill\ ratio = \frac{bill\ length}{bill\ depth}
$$

La @fig-bill-ratio représente la distribution de ce ratio pour chaque espèce :

```{r}
#| label: fig-bill-ratio
#| fig-cap: Distribution du ratio longueur du bec / hauteur du bec
penguins |> 
  mutate(bill_ratio = bill_length_mm / bill_depth_mm) |> 
  ggplot(aes(x = fct_rev(species),
             y = bill_ratio,
             color = species,
             fill = species)) +
  geom_boxplot(alpha = 0.2,
               show.legend = FALSE) +
  scale_color_manual(values = my_cols) +
  scale_fill_manual(values = my_cols) +
  labs(x = "Espèce",
       y = "Ratio entre la longueur\net la hauteur du bec") +
  theme_bw()
```

::: {.callout-tip appearance="simple"}
Les espèces peuvent être triées par ordre décroissant de médiane de ratio : *Gentoo*, puis *Chinstrap*, puis *Adelie*.
:::
